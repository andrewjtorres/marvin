parameters:
  options:
  reportDirectory: '**/htmlcov'
  summaryFileLocation: '**/coverage.xml'
steps:
  - task: PublishCodeCoverageResults@1
    displayName: Publish code coverage results
    inputs:
      codeCoverageTool: cobertura
      summaryFileLocation: $(System.DefaultWorkingDirectory)/${{ parameters.summaryFileLocation }}
      reportDirectory: $(System.DefaultWorkingDirectory)/${{ parameters.reportDirectory }}
  - script: yarn --silent codecov ${{ parameters.options }}
    displayName: Publish code coverage results to Codecov
